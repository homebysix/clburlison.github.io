<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Vmware on clburlison</title>
    <link>https://clburlison.com/tags/vmware/feed/index.xml</link>
    <description>Recent content in Vmware on clburlison</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-EN</language>
    <managingEditor>clburlison@gmail.com (Clayton Burlison)</managingEditor>
    <webMaster>clburlison@gmail.com (Clayton Burlison)</webMaster>
    <copyright>(c) 2014 - 2017 Clayton Burlison</copyright>
    <atom:link href="https://clburlison.com/tags/vmware/feed/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Shrinking a linux virtual disk</title>
      <link>https://clburlison.com/shrink-linux-vm-disk/</link>
      <pubDate>Fri, 20 Feb 2015 00:00:00 +0000</pubDate>
      <author>clburlison@gmail.com (Clayton Burlison)</author>
      <guid>https://clburlison.com/shrink-linux-vm-disk/</guid>
      <description>

&lt;p&gt;I have written about shrinking the virtual disk of an OS X Virtual Machine &lt;a href=&#34;https://clburlison.com/blog/2014/04/01/shrinking-the-disk-image-of-an-os-x-vm/&#34;&gt;here&lt;/a&gt; but recently I needed to shrink a Linux virtual machine. The process is almost identical across all of VMware&amp;rsquo;s products you just have to find the &lt;code&gt;vmware-vdiskmanager&lt;/code&gt; tool.&lt;/p&gt;

&lt;h1 id=&#34;the-process&#34;&gt;The process&lt;/h1&gt;

&lt;p&gt;In most operating systems removing the files from the disk merely alters file tables so the operating system sees the space as free on the disk. For &lt;code&gt;vmware-vdiskmanager&lt;/code&gt; to work, the disk space actually needs to be free which we can accomplish using a processed called zeroing.&lt;/p&gt;

&lt;p&gt;The steps below could take quite some time depending on the files being deleted, speed of the disks, and CPU of the virtual machine.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;On the Virtual Machine:&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;dd if=/dev/zero of=/EMPTY bs=1M
rm -f /EMPTY
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now that we have successfully zeroed the data use &lt;code&gt;vmware-vdiskmanager&lt;/code&gt; to shrink the virtual disk.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;On the VM Host:&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;quot;/Applications/VMware Fusion.app/Contents/Library/vmware-vdiskmanager&amp;quot; \
 -k &amp;quot;/path/to/your/vm/disk.vmdk&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;Articles:&lt;br /&gt;
&lt;a href=&#34;http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=1002019&#34; target=&#34;_blank&#34;&gt;Growing, thinning and shrinking virtual disks for VMware ESX and ESXi&lt;/a&gt;,&lt;br /&gt;
&lt;a href=&#34;https://clburlison.com/blog/2014/04/01/shrinking-the-disk-image-of-an-os-x-vm/&#34;&gt;Shrinking the disk image of an os x vm&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Shrinking the disk image of an OS X VM</title>
      <link>https://clburlison.com/shrinking-the-disk-image-of-an-os-x-vm/</link>
      <pubDate>Tue, 01 Apr 2014 00:00:00 +0000</pubDate>
      <author>clburlison@gmail.com (Clayton Burlison)</author>
      <guid>https://clburlison.com/shrinking-the-disk-image-of-an-os-x-vm/</guid>
      <description>&lt;p&gt;Reducing the size of a guest OS X Virtual Machines&amp;rsquo;s vmdk file requires a few steps.  For a Windows VM&amp;rsquo;s, there is a tool from VMWare with a GUI.  Unfortunately, there is not an equivalent tool for the Mac guest VM.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This technique has tested and confirmed on OS X 10.9.2 using VMware Fusion 6.02 though it should work from 10.7 and up. This assumes your guest vm’s disk is not pre-allocated, and the virtual machine does not have any snapshots. If you have any snapshots now would be a good time to delete them.&lt;/p&gt;

&lt;p&gt;Space is always a constraint so the smaller my Virtual Machines the better. Plus, backing up a Virtual Machine or transferring to a separate drive is much faster the smaller the vmdk is.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Prepare the disk image for shrinking by using the guest vm’s Disk Utility.app to “Erase Free Space” (fast zero’ing will suffice).  For a disk image using 15 to 20GB, this may take five to ten minutes. When complete, shut down the vm and close the VMware Fusion app.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Using Finder, confirm the location of your guest vm’s vmdk files.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Open Terminal and type the following changing the path to your virtual disk at the end.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ &amp;quot;/Applications/VMware Fusion.app/Contents/Library/vmware-vdiskmanager&amp;quot; \
-k &amp;quot;/path/to/your/vm/disk.vmdk&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;If you’ve successfully entered the command, Terminal will display &lt;code&gt;&amp;quot;$ Shrink: xx% done.&amp;quot;&lt;/code&gt; until the operation is complete.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Article: &lt;a href=&#34;http://blog.aitrus.com/2012/07/28/vmware-fusion-shrinking-the-disk-image-of-an-os-x-guest-vm/&#34; target=&#34;_blank&#34;&gt;http://blog.aitrus.com/&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>