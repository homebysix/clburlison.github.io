<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Munkireport on clburlison</title>
    <link>https://clburlison.com/tags/munkireport/feed/index.xml</link>
    <description>Recent content in Munkireport on clburlison</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-EN</language>
    <managingEditor>clburlison@gmail.com (Clayton Burlison)</managingEditor>
    <webMaster>clburlison@gmail.com (Clayton Burlison)</webMaster>
    <copyright>(c) 2014 - 2017 Clayton Burlison</copyright>
    <atom:link href="https://clburlison.com/tags/munkireport/feed/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Fix Munkireport Error Request Too Large</title>
      <link>https://clburlison.com/munkireport-error-fix/</link>
      <pubDate>Wed, 21 Jan 2015 00:00:00 +0000</pubDate>
      <author>clburlison@gmail.com (Clayton Burlison)</author>
      <guid>https://clburlison.com/munkireport-error-fix/</guid>
      <description>

&lt;h1 id=&#34;intro&#34;&gt;Intro&lt;/h1&gt;

&lt;p&gt;I use &lt;a href=&#34;https://github.com/munkireport/munkireport-php&#34; target=&#34;_blank&#34;&gt;Munkireport-php&lt;/a&gt; as my main reporting system at my work but have recently ran into an error when uploading data from client machines. My setup is using nginx to serve the files.&lt;/p&gt;

&lt;h2 id=&#34;error-message&#34;&gt;Error message&lt;/h2&gt;

&lt;p&gt;The error message below is what was showing up from a manual munki run with verbose enabled, you can run the command with:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo /usr/local/munki/managedsoftwareupdate -v
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;...
Starting...
    Running preinstall_script for munkireport...
    BaseURL is http://munki01.example.com/report/
    Retrieving munkireport scripts
    Configuring munkireport
    + Installing ard
    + Installing bluetooth
    + Installing directory_service
    + Installing disk_report
    + Installing displays_info
    + Installing filevault_status
    + Installing installhistory
    + Installing inventory
    + Installing localadmin
    + Installing munkireport
    + Installing network
    + Installing power
    + Installing warranty
    Installation of MunkiReport v2.1.0 complete.
    Running the preflight script for initialization
Installing Munkireport Install and config (1 of 1)...
    Running postinstall_script for munkireport...
Finishing...
    Performing postflight tasks...
    postflight stderr: ERROR: Munkireport: http://munki01.example.com/report/index.php?/report/check_in
ERROR: Munkireport: We failed to reach a server
ERROR: Munkireport: Reason: Request Entity Too Large
Done.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After some digging around, this error is an http Error 413 which is normally caused by:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;uploading a large file from a visitor or client machine to the web server&lt;/li&gt;
&lt;li&gt;too much POST data being sent by the client&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This can be easily fixed by modifying your nginx configuration to increasing the size allowed on upload. Which will allow the run to complete successfully.&lt;/p&gt;

&lt;h1 id=&#34;the-fix&#34;&gt;The Fix&lt;/h1&gt;

&lt;p&gt;We can fix this HTTP request issue at three different levels of the nginx config: the &lt;strong&gt;http&lt;/strong&gt; block, the &lt;strong&gt;server&lt;/strong&gt; block or the &lt;strong&gt;location&lt;/strong&gt; block.&lt;/p&gt;

&lt;p&gt;Open your nginx configuration:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo nano /etc/nginx/nginx.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The following example increased the file size upload to 10 MB which solved the error for me. Your milage may vary and you might need to increase the max size if this doesn&amp;rsquo;t solve your error.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;http {
	client_max_body_size 10M; # allows file uploads up to 10 megabytes
	...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After changing the server configuration run the following command to reload your Nginx service.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo service nginx restart
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;anything-else&#34;&gt;Anything else?&lt;/h1&gt;

&lt;p&gt;In addition to the change above, it might be necessary to modify PHP settings on your server. Open your PHP configuration file:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo nano /etc/php5/fpm/php.ini
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Look for the following two values and increase if needed:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;upload_max_filesize:&lt;/strong&gt; Maximum allowed size for uploaded files (default: 2 megabytes). You need to increase this value if you expect files over 2 megabytes in size.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;post_max_size:&lt;/strong&gt; Maximum size of POST data that PHP will accept (default: 8 megabytes). Files are sent via POST data, so you need to increase this value if you are expecting files over 8 megabytes.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you make any changes your will need to reload Nginx (above) and PHP-FPM (below):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo restart php5-fpm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;Note&lt;/em&gt;: Modifying my PHP was not necessary for my setup but I will leave it here in case it helps you.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Articles:&lt;br /&gt;
&lt;a href=&#34;http://cnedelcu.blogspot.com/2013/09/nginx-error-413-request-entity-too-large.html&#34; target=&#34;_blank&#34;&gt;Nginx error 413&lt;/a&gt;,&lt;br /&gt;
&lt;a href=&#34;https://github.com/munkireport/munkireport-php/&#34; target=&#34;_blank&#34;&gt;Munkireport Wiki&lt;/a&gt;,&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Setup Munkireport on Ubuntu 14.04 - Part 3</title>
      <link>https://clburlison.com/munkirepo-guide-part-3/</link>
      <pubDate>Thu, 23 Oct 2014 00:00:00 +0000</pubDate>
      <author>clburlison@gmail.com (Clayton Burlison)</author>
      <guid>https://clburlison.com/munkirepo-guide-part-3/</guid>
      <description>

&lt;div class=&#34;alert alert-info&#34;&gt;
  &lt;p&gt;&lt;strong&gt;Ubuntu 16.04/ PHP 7:&lt;/strong&gt; Lucas Hall has created an updated guide based off of this one that uses Ubuntu 16.04 with PHP 7, which can be viewed &lt;a href=&#34;https://lucasjhall.com/2016/08/06/munkireport-ubuntu-sql/&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;/div&gt;


&lt;h1 id=&#34;intro&#34;&gt;Intro&lt;/h1&gt;

&lt;p&gt;Welcome to the third part in our munki server setup series. In this section, we will download and configure &lt;a href=&#34;https://github.com/munkireport/munkireport-php&#34; target=&#34;_blank&#34;&gt;Munkireport-php&lt;/a&gt; on our munki server.&lt;/p&gt;

&lt;p&gt;Before we get to far you might want to head over to &lt;a href=&#34;https://clburlison.com/munkirepo-guide-part-1/&#34;&gt;Part 1 - Setting up the munki repo&lt;/a&gt; or &lt;a href=&#34;https://clburlison.com/munkirepo-guide-part-2/&#34;&gt;Part 2 - Setting up mandrill&lt;/a&gt;. Parts 1 and 2 are not technically required for MunkiReport by you will want to have an understanding of how the other components of your munki server work before setting up the reporting server.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://clburlison.com/images/2014-10-23/mr.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;the-install&#34;&gt;The Install&lt;/h1&gt;

&lt;p&gt;Munkireport is a web application written in php that displays useful stats about your munki fleet. The resources taken up by MunkiReport are quite small but like all web apps if you client base grows very large you will want to make sure the database can keep up. With that you can install MunkiReport on any compatible web-server (IIS, apache, or nginx) for this guide we will be using our munki server from Parts 1 &amp;amp; 2 as our reporting server.&lt;/p&gt;

&lt;p&gt;Part of this installation includes setting up MySQL as our database backend. SQLite is the default database but I highly recommend setting my MySQL since the &lt;a href=&#34;https://github.com/munkireport/munkireport-php/wiki/Performance&#34; target=&#34;_blank&#34;&gt;performance&lt;/a&gt; gains are high and setup only takes a few more steps, not to mention SQLite will start to choke when higher volumes of clients start to check-in with the reporting server.&lt;/p&gt;

&lt;p&gt;It is also important to note, I like MunkiReport to be hosted on a sub-directory. This means when connecting to MuniReport you will type [&lt;a href=&#34;http://yourserver.example.com/report/](&#34; target=&#34;_blank&#34;&gt;http://yourserver.example.com/report/](&lt;/a&gt;) to access the site. If you want a different setup, you will need to make the necessary changes.&lt;/p&gt;

&lt;h2 id=&#34;installing-required-software&#34;&gt;Installing Required Software&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo apt-get update
sudo apt-get -y install nginx git php5-fpm php5-mysql php5-ldap
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;alert alert-info&#34;&gt;
  &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; The &lt;code&gt;php5-ldap&lt;/code&gt; package is only needed if you are planning on connecting to an Active Directory or LDAP directory for authenticating to MunkiReport.&lt;/p&gt;

&lt;/div&gt;


&lt;h2 id=&#34;setup-mysql&#34;&gt;Setup MySQL&lt;/h2&gt;

&lt;p&gt;Lets install MySQL&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo apt-get install mysql-client mysql-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;This will prompt you to create the root mysql database account. Do not forget the password you set.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Now, we need to tell MySQL to generate the directory structure it needs to store its databases and information. We can do this by typing:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo mysql_install_db
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next, you can optionally run a simple security script that will prompt you to modify some insecure defaults (this is highly recommended on production servers). Begin the script by typing:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo mysql_secure_installation
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You will need to enter the MySQL root password that you selected during installation.&lt;/p&gt;

&lt;p&gt;During the secure installation script it will ask if you want to change the root password. If you are happy with your MySQL root password, type &amp;ldquo;N&amp;rdquo; for no and hit &amp;ldquo;ENTER&amp;rdquo;. Afterwards, you will be prompted to remove some test users and databases. You should choice &amp;ldquo;Y&amp;rdquo; and hit &amp;ldquo;enter&amp;rdquo; through these prompts to remove the &amp;ldquo;unsafe&amp;rdquo; defaults from installation.&lt;/p&gt;

&lt;p&gt;Once the script has been run, MySQL is ready to go.&lt;/p&gt;

&lt;h3 id=&#34;creating-the-database&#34;&gt;Creating the database&lt;/h3&gt;

&lt;p&gt;Lets create our MunkiReport database with the name of &lt;code&gt;munkireport&lt;/code&gt;. We will also create a database user and password. Change &lt;em&gt;USERNAME&lt;/em&gt; and &lt;em&gt;PASSWORD&lt;/em&gt; to your preference. Note the database username that is created below is what you will enter into your config.php in the following steps. It is bad practice to use the root account for database entry.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;
echo &amp;quot;CREATE DATABASE munkireport CHARACTER SET utf8 COLLATE utf8_bin;&amp;quot; | mysql -u root -p
echo &amp;quot;CREATE USER &#39;USERNAME&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;PASSWORD&#39;;&amp;quot; | mysql -u root -p
echo &amp;quot;GRANT ALL PRIVILEGES ON munkireport.* TO &#39;USERNAME&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;PASSWORD&#39;;&amp;quot; | mysql -u root -p
echo &amp;quot;FLUSH PRIVILEGES;&amp;quot; | mysql -u root -p

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;configure-php&#34;&gt;Configure php&lt;/h2&gt;

&lt;p&gt;Lets make one small change to the default php configuration.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo nano /etc/php5/fpm/php.ini
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Find the line, &lt;strong&gt;cgi.fix_pathinfo=1&lt;/strong&gt;, and change the &lt;strong&gt;1 to 0&lt;/strong&gt;. Also, uncomment this line to enable this security setting. The file should now look like the below excerpt:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;lt;---------------

; cgi.fix_pathinfo provides *real* PATH_INFO/PATH_TRANSLATED support for CGI.  PHP&#39;s
; previous behaviour was to set PATH_TRANSLATED to SCRIPT_FILENAME, and to not grok
; what PATH_INFO is.  For more information on PATH_INFO, see the cgi specs.  Setting
; this to 1 will cause PHP CGI to fix its paths to conform to the spec.  A setting
; of zero causes PHP to behave as before.  Default is 1.  You should fix your scripts
; to use SCRIPT_FILENAME rather than PATH_TRANSLATED.
; http://php.net/cgi.fix-pathinfo
cgi.fix_pathinfo=0

---------------&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If this number is kept as 1, the php interpreter will do its best to process the file that is as near to the requested file as possible. This is a possible security risk. If this number is set to 0, conversely, the interpreter will only process the exact file pathâ€”a much safer alternative. Save and Exit.&lt;/p&gt;

&lt;p&gt;Now, restart php-fpm for the change to take affect:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo service php5-fpm restart
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;downloading-munkireport&#34;&gt;Downloading MunkiReport&lt;/h2&gt;

&lt;p&gt;We are finally to the point that we can start getting MunkiReport setup.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo git clone https://github.com/munkireport/munkireport-php /usr/share/nginx/html/report
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;At this point, lets create a link to our report folder for our local Ubuntu admin, this allows us to make modifications easier in the future.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo ln -s /usr/share/nginx/html/report ~/report
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;MunkiReport requires a config.php, this is your settings for MunkiReport. Below are some defaults that I think most users will want. For a full list of options please visit &lt;a href=&#34;https://github.com/munkireport/munkireport-php/blob/master/config_default.php&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You will want to change  the following in your config.php file:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;sitename = change Company to something useful&lt;/li&gt;
&lt;li&gt;allow_migrations = you will want to change this to true for MunkiReport updates&lt;/li&gt;
&lt;li&gt;debug = change this to false if you don&amp;rsquo;t need debugging&lt;/li&gt;
&lt;li&gt;timezone = for your &lt;a href=&#34;http://en.wikipedia.org/wiki/List_of_tz_database_time_zones&#34; target=&#34;_blank&#34;&gt;timezone&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ssh = change &lt;em&gt;ladmin&lt;/em&gt; to your company local mac admin account&lt;/li&gt;
&lt;li&gt;locale = change to location&lt;/li&gt;
&lt;li&gt;lang = change to your language&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The root account is created for you, for testing purposes. You will want to create your own admin account by visiting &lt;a href=&#34;http://yourserver.example.com/report/index.php?/auth/generate&#34; target=&#34;_blank&#34;&gt;http://yourserver.example.com/report/index.php?/auth/generate&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Let&amp;rsquo;s create a new &lt;code&gt;config.php&lt;/code&gt; file that stores our settings.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo nano /usr/share/nginx/html/report/config.php
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You&amp;rsquo;ll want to copy/paste the entire section below, making changes where necessary. The last section of the config file deals with our MySQL database. You will want to change the username and password to match what you created in the previous step.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-php&#34;&gt;&amp;lt;?php if ( ! defined( &#39;KISS&#39; ) ) exit;

$conf[&#39;index_page&#39;] = &#39;index.php?&#39;;
$conf[&#39;sitename&#39;] = &#39;Company - MunkiReport&#39;;
$conf[&#39;allow_migrations&#39;] = FALSE;
$conf[&#39;debug&#39;] = TRUE;
$conf[&#39;timezone&#39;] = @date_default_timezone_get(America/Chicago);
$conf[&#39;vnc_link&#39;] = &amp;quot;vnc://%s:5900&amp;quot;;
$conf[&#39;ssh_link&#39;] = &amp;quot;ssh://ladmin@%s&amp;quot;;
ini_set(&#39;session.cookie_lifetime&#39;, 43200);
$conf[&#39;locale&#39;] = &#39;en_US&#39;;
$conf[&#39;lang&#39;] = &#39;en&#39;;
$conf[&#39;keep_previous_displays&#39;] = TRUE;

/*
|===============================================
| Authorized Users of Munki Report
|===============================================
| Visit http://yourserver.example.com/report/index.php?/auth/generate to generate additional local values
*/
$auth_config[&#39;root&#39;] = &#39;$P$BUqxGuzR2VfbSvOtjxlwsHTLIMTmuw0&#39;; // Password is root

/*
|===============================================
| PDO Datasource
|===============================================
*/
$conf[&#39;pdo_dsn&#39;] = &#39;mysql:host=localhost;dbname=munkireport&#39;;
$conf[&#39;pdo_user&#39;] = &#39;munki&#39;;
$conf[&#39;pdo_pass&#39;] = &#39;munki&#39;;
$conf[&#39;pdo_opts&#39;] = array(PDO::MYSQL_ATTR_INIT_COMMAND =&amp;gt; &#39;SET NAMES utf8&#39;);
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We are an Active Directory shop at my work place and for that reason I really like the ability for MunkiReport to pull an AD group and give access (remember the php5-ldap package we installed earlier). Unfortunately, in my current testing this function is slightly broken at the moment. When attempting to login to MunkiReport using AD Group Authorization you will be presented a white screen. A refresh on the blank screen along with a &amp;ldquo;Resend form data&amp;rdquo; will get you to the dashboard. This is a pretty annoying inconvenience, so at this moment I have simply added our report administrators into the &amp;lsquo;allowed_users&amp;rsquo; line in my config.php.&lt;/p&gt;

&lt;p&gt;Below are the additional settings need to make Active Directory work with MunkiReport:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;
// Below are the options for Active Directory user authorization
$conf[&#39;auth&#39;][&#39;auth_AD&#39;][&#39;account_suffix&#39;] = &#39;@example.com&#39;;
$conf[&#39;auth&#39;][&#39;auth_AD&#39;][&#39;base_dn&#39;] = &#39;dc=example,dc=come&#39;; //set to NULL to auto-detect
$conf[&#39;auth&#39;][&#39;auth_AD&#39;][&#39;domain_controllers&#39;] = array(&#39;server1.example.com&#39;,&#39;server2.example.com&#39;); //can be an array of servers
$conf[&#39;auth&#39;][&#39;auth_AD&#39;][&#39;admin_username&#39;] = &#39;admin&#39;; //if needed to perform the search
$conf[&#39;auth&#39;][&#39;auth_AD&#39;][&#39;admin_password&#39;] = &#39;munki_is_cool&#39;; //if needed to perform the search
$conf[&#39;auth&#39;][&#39;auth_AD&#39;][&#39;mr_allowed_users&#39;] = array(&#39;userA&#39;,&#39;userB&#39;,&#39;userC&#39;);
$conf[&#39;auth&#39;][&#39;auth_AD&#39;][&#39;mr_allowed_groups&#39;] = array(&#39;MunkiReportAdmins&#39;); //case sensitive

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;configure-nginx-for-munkireport&#34;&gt;Configure nginx for MunkiReport&lt;/h2&gt;

&lt;p&gt;Lets configure nginx to use &lt;a href=&#34;http://yourserver.example.com/report&#34; target=&#34;_blank&#34;&gt;http://yourserver.example.com/report&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo nano /etc/nginx/sites-enabled/default
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;alert alert-info&#34;&gt;
  &lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Make sure and change your &lt;code&gt;server_name&lt;/code&gt;. This file also takes care of our munki_repo from &lt;a href=&#34;https://clburlison.com/munkirepo-guide-part-1/&#34;&gt;Part 1&lt;/a&gt;.&lt;/p&gt;

&lt;/div&gt;


&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;server {
    listen 80 default_server;
    listen [::]:80 default_server ipv6only=on;

    root /usr/share/nginx/html;
    index index.php index.html index.htm;

    server_name munki;

    error_page 404 /404.html;
    error_page 500 502 503 504 /50x.html;
    location = /50x.html {
        root /usr/share/nginx/html;
    }

    location /report {
        try_files $uri $uri/ =404;
    }

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }

    location /munki_repo/ {
      alias /usr/local/munki_repo/;
      autoindex off;
      auth_basic &amp;quot;Restricted&amp;quot;;
      auth_basic_user_file /etc/nginx/.htpasswd;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We must change our nginx default settings for php to work.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo nano /etc/nginx/nginx.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Look for &lt;code&gt;default_type  application/octet-stream;&lt;/code&gt; and comment this line out. Check out the below excerpt:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;&amp;lt;---------------

# server_names_hash_bucket_size 64;
        # server_name_in_redirect off;

        include /etc/nginx/mime.types;
        #default_type application/octet-stream; //comment me out for MunkiReport to work

        ##
        # Logging Settings
        ##

---------------&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To test your nginx configuration run the following command. This will make sure that you have no errors.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo nginx -c /etc/nginx/nginx.conf -t
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Restart Nginx to make the necessary changes:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo service nginx restart
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;conclusion&#34;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;You should now have a basic MunkiReport configuration up and running. Double check that everything is working by visiting &lt;a href=&#34;http://youserver.example.com/report/&#34; target=&#34;_blank&#34;&gt;http://youserver.example.com/report/&lt;/a&gt;. Remember the default username and password, &lt;code&gt;root&lt;/code&gt;. For more settings and additional information please visit the Wiki for &lt;a href=&#34;https://github.com/munkireport/munkireport-php/wiki&#34; target=&#34;_blank&#34;&gt;MunkiReport&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As always feel free to drop a comment below or on Twitter. Feedback is always appreciated.&lt;/p&gt;

&lt;div class=&#34;alert alert-info&#34;&gt;
  &lt;p&gt;&lt;strong&gt;Congrats!&lt;/strong&gt; You made it this far. Unfortunately you&amp;rsquo;re not done yet. You will likely run into an issue with request size on your munki clients as such please go read &lt;a href=&#34;https://clburlison.com/munkireport-error-fix/&#34; target=&#34;_blank&#34;&gt;this&lt;/a&gt;.&lt;/p&gt;

&lt;/div&gt;


&lt;hr /&gt;

&lt;h1 id=&#34;apendium-1-connecting-a-client-to-munkireport&#34;&gt;Apendium 1 - connecting a client to MunkiReport&lt;/h1&gt;

&lt;p&gt;If you would like to connect a single munki client to MunkiReport you can use the following command:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo /bin/bash -c &amp;quot;$(curl -s http://yourserver.example.com/report/index.php?/install)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;apendium-2-adding-munkireport-to-your-munki-repo&#34;&gt;Apendium 2 - adding MunkiReport to your munki_repo&lt;/h1&gt;

&lt;p&gt;To add multiple Munki clients to MunkiReport we should use munki. To get a generated plist file that you can drop into your _munki&lt;em&gt;repo/pkginfo&lt;/em&gt; directory run the following command.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;curl -s https://yourserver.example.com/report/index.php?/install/plist -o \
~/Desktop/MunkiReport.plist
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The output file will end up on your Desktop for easy transfer to your repo.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Articles:&lt;br /&gt;
&lt;a href=&#34;https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-on-ubuntu-14-04&#34; target=&#34;_blank&#34;&gt;Install LEMP stack on Ubuntu 14.04&lt;/a&gt;,&lt;br /&gt;
&lt;a href=&#34;https://github.com/munkireport/munkireport-php/wiki&#34; target=&#34;_blank&#34;&gt;Munkireport Wiki&lt;/a&gt;,&lt;br /&gt;
&lt;a href=&#34;http://www.nbalonso.com/new-munkireport-php-2/&#34; target=&#34;_blank&#34;&gt;nbalonso Munkireport-php&lt;/a&gt;,&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>